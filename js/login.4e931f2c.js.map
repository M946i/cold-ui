{"version":3,"sources":["webpack:///./src/views/login/index.vue?1caf","webpack:///./src/views/login/index.vue","webpack:///./src/views/login/index.vue?3c99","webpack:///./src/views/login/index.vue?1685","webpack:///./src/views/login/index.vue?2966","webpack:///./src/views/login/index.vue?48a0","webpack:///./src/views/login/index.vue?5106"],"names":["render","_vm","this","_c","_self","_setupProxy","staticClass","ref","attrs","loginForm","loginRules","require","_v","model","value","username","callback","$$v","$set","expression","key","passwordType","nativeOn","$event","type","indexOf","_k","keyCode","handleLogin","apply","arguments","password","on","showPwd","staticStyle","loading","preventDefault","staticRenderFns","default_1","_Vue","_this","_classCallCheck","validateUsername","rule","isValidUsername","Error","validatePassword","length","validator","trigger","showDialog","otherQuery","_inherits","_createClass","route","query","redirect","getOtherQuery","$refs","focus","_this2","$nextTick","_this3","validate","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","valid","wrap","_context","prev","next","UserModule","Login","$router","push","path","abrupt","stop","_x","Object","keys","reduce","acc","cur","Vue","tslib_1","Watch","immediate","Component","name","component","module","exports"],"mappings":"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","file":"js/login.4e931f2c.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=729e48bc&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"login-container\"},[_c('el-form',{ref:\"loginForm\",staticClass:\"login-form\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.loginRules,\"autocomplete\":\"on\",\"label-position\":\"left\"}},[_c('div',{staticClass:\"title-container\"},[_c('div',{staticClass:\"title\"},[_c('img',{staticClass:\"log\",attrs:{\"src\":require(\"./../../assets/logo.png\"),\"alt\":\"\"}}),_vm._v(\"冷链监控系统\\n      \")])]),_c('div',{staticClass:\"logForm\"},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('span',{staticClass:\"svg-container\"},[_c('svg-icon',{attrs:{\"name\":\"user\"}})],1),_c('el-input',{ref:\"username\",attrs:{\"name\":\"username\",\"type\":\"text\",\"placeholder\":\"请输入用户名\"},model:{value:(_vm.loginForm.username),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username\", $$v)},expression:\"loginForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('span',{staticClass:\"svg-container\"},[_c('svg-icon',{attrs:{\"name\":\"password\"}})],1),_c('el-input',{key:_vm.passwordType,ref:\"password\",attrs:{\"type\":_vm.passwordType,\"placeholder\":\"请输入密码\",\"name\":\"password\",\"autocomplete\":\"on\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleLogin.apply(null, arguments)}},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}}),_c('span',{staticClass:\"show-pwd\",on:{\"click\":_vm.showPwd}},[_c('svg-icon',{attrs:{\"name\":_vm.passwordType === 'password' ? 'eye-off' : 'eye-on'}})],1)],1),_c('el-button',{staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"30px\"},attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.handleLogin.apply(null, arguments)}}},[_vm._v(\"\\n      登录\\n    \")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\nimport { Component, Vue, Watch } from 'vue-property-decorator'\r\nimport { Route } from 'vue-router'\r\nimport { Dictionary } from 'vuex'\r\nimport { Form as ElForm, Input } from 'element-ui'\r\nimport { UserModule } from '@/store/modules/user'\r\nimport { isValidUsername } from '@/utils/validate'\r\n\r\n@Component({\r\n  name: 'Login'\r\n})\r\nexport default class extends Vue {\r\n  private validateUsername = (rule: any, value: string, callback: Function) => {\r\n    if (!isValidUsername(value)) {\r\n      callback(new Error('Please enter the correct user name'))\r\n    } else {\r\n      callback()\r\n    }\r\n  }\r\n  private validatePassword = (rule: any, value: string, callback: Function) => {\r\n    if (value.length < 5) {\r\n      callback(new Error('The password can not be less than 5 digits'))\r\n    } else {\r\n      callback()\r\n    }\r\n  }\r\n  private loginForm = {\r\n    username: 'admin',\r\n    password: 'admin123'\r\n  }\r\n  private loginRules = {\r\n    username: [{ validator: this.validateUsername, trigger: 'blur' }],\r\n    password: [{ validator: this.validatePassword, trigger: 'blur' }]\r\n  }\r\n  private passwordType = 'password'\r\n  private loading = false\r\n  private showDialog = false\r\n  private redirect?: string\r\n  private otherQuery: Dictionary<string> = {}\r\n\r\n  @Watch('$route', { immediate: true })\r\n  private onRouteChange(route: Route) {\r\n    // TODO: remove the \"as Dictionary<string>\" hack after v4 release for vue-router\r\n    // See https://github.com/vuejs/vue-router/pull/2050 for details\r\n    const query = route.query as Dictionary<string>\r\n    if (query) {\r\n      this.redirect = query.redirect\r\n      this.otherQuery = this.getOtherQuery(query)\r\n    }\r\n  }\r\n\r\n  mounted() {\r\n    if (this.loginForm.username === '') {\r\n      (this.$refs.username as Input).focus()\r\n    } else if (this.loginForm.password === '') {\r\n      (this.$refs.password as Input).focus()\r\n    }\r\n  }\r\n\r\n  private showPwd() {\r\n    if (this.passwordType === 'password') {\r\n      this.passwordType = ''\r\n    } else {\r\n      this.passwordType = 'password'\r\n    }\r\n    this.$nextTick(() => {\r\n      (this.$refs.password as Input).focus()\r\n    })\r\n  }\r\n\r\n  private handleLogin() {\r\n    (this.$refs.loginForm as ElForm).validate(async(valid: boolean) => {\r\n      if (valid) {\r\n        this.loading = true\r\n        await UserModule.Login(this.loginForm)\r\n        this.$router.push({\r\n          path: this.redirect || '/',\r\n          query: this.otherQuery\r\n        })\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n  }\r\n\r\n  private getOtherQuery(query: Dictionary<string>) {\r\n    return Object.keys(query).reduce((acc, cur) => {\r\n      if (cur !== 'redirect') {\r\n        acc[cur] = query[cur]\r\n      }\r\n      return acc\r\n    }, {} as Dictionary<string>)\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=729e48bc&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=729e48bc&prod&lang=scss\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=729e48bc&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"729e48bc\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=729e48bc&prod&lang=scss\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuBg\":\"#fff\",\"menuText\":\"#bfcbd9\",\"menuActiveText\":\"#409eff\"};"],"sourceRoot":""}